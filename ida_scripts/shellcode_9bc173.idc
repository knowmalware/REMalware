#include <idc.idc>

static main(void)
{
    auto start, end, ptr, dest;
    auto key, tmp;

    start = SelStart();
    if (start == BADADDR)
	return;

    end = SelEnd();
    if (end == BADADDR)
	return;

    end = end - 1; /* Otherwise we'll be off by one */

    key = 0x61;

    dest = start;
    for (ptr = start; ptr <= end; ptr = ptr + 2)
    {
        tmp = Byte(ptr) - key;
        tmp = tmp << 4;
        tmp = tmp + Byte(ptr+1) - key;
        PatchByte(dest, tmp & 0xFF);
        dest++;
    }

    Message("done.\n");
}
