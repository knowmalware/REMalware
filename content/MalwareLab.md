# Malware Lab

## About

Before we dive into the Malware, we need to have make sure we've got our toolbox handy and loaded with everything required for the task.

For starters, we need to choose a platform (hardware, Operating System, and software frameworks) and network architecture. Some factors to consider:

- OS typically targeted by Malware to be analyzed
- Risks to network
- Operating Costs
- Backup/Restore Capabilities

## Physical vs Virtual

Bare-Metal vs. Virtualized Analysis

### Network Security/Isolation
The most critical requirement for a malware analysis lab is that it does not impact critical infrastructure. Analysts must understand the risks their collections and analysis procedures pose to their networks. Malware may be capable of infecting neighboring machines.

- Bare-Metal Options
    - Stand-Alone Computer
    - Air-Gapped Network
    - Additional hardware (e.g. firewall) to reduce risk of infection
- Virtual Machine
    - Remove, Disconnect, or Disable Virtual Network Interface
    - Host-Only Network
        - Be aware of services listening on this Host OS
        - Can disable the host connection to this network

### Backup/Restore
Malware analysis should begin with a baseline (clean) state which can be compared against the state after malware has executed. This calls for a backup and restore capability.

- Physical
    - Disk image backup and restore (e.g. Norton Ghost)
- Virtual
    - Snap-shots: Rapid save and restore of state

### Choosing the right environment
Based on the requirements described above, Virtualization provides the ideal environment for malware analysis, but the following drawbacks should be considered:

- Malware may change behavior if a VM is detected.
- Virtualization platform may increase due to vulnerabilities.
